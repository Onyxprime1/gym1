<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>Asignar dieta a paciente</title>

    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css"/>

    <style>
        :root{--bg:#0a0a0e;--ink:#f2f2f2;--muted:#b7b7c2;--accent:#ffc107;--card:#111118;--line:#1b1b25}
        html,body{background:var(--bg);color:var(--ink);}
        .navbar{background:#0b0b12;border-bottom:1px solid rgba(255,255,255,.06);}
        .brand{color:var(--accent);font-weight:900;letter-spacing:.6px;}
        .cardx{background:var(--card);border:1px solid var(--line);border-radius:12px;padding:1.5rem;}
        .muted{color:var(--muted);}
        a{color:var(--accent);}
        .btn-main{background:var(--accent);color:#111;padding:.45rem .9rem;border-radius:8px;border:none;font-weight:800;}
        table{width:100%;color:var(--ink);}
        thead{background:#0e0e13;}
        th,td{padding:.6rem .75rem;font-size:.95rem;}
        tbody tr:nth-child(even){background:#0d0d12;}
    </style>
</head>
<body>

<nav class="navbar">
    <div class="container">
        <div class="navbar-brand">
            <a class="navbar-item brand" href="/nutriologo/panel">DEBUG Gym · Nutriólogo</a>
        </div>
        <div class="navbar-menu">
            <div class="navbar-end">
                <div class="navbar-item">
                    <a class="button is-light"
                       th:href="@{|/nutriologo/dietas?clienteId=${cliente.id}|}">
                        Volver a dietas
                    </a>
                </div>
            </div>
        </div>
    </div>
</nav>

<section class="section">
    <div class="container">
        <div class="cardx">
            <h2 class="title is-4">
                Asignar dieta a <span th:text="${cliente.nombre}">Paciente</span>
            </h2>
            <p class="muted">
                Selecciona una dieta del catálogo para asignarla a este paciente.
            </p>

            <form th:action="@{/nutriologo/dietas/asignar}" method="post" style="margin-top:1rem">
                <input type="hidden" name="clienteId" th:value="${cliente.id}"/>

                <div class="field">
                    <label class="label">Dieta a asignar</label>
                    <div class="control">
                        <div class="select is-fullwidth">
                            <select name="dietaId" required>
                                <option value="" disabled selected>Selecciona una dieta...</option>
                                <option th:each="d : ${dietas}"
                                        th:value="${d.idDieta}"
                                        th:text="${d.nombre}">
                                    Dieta
                                </option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="field" style="margin-top:1rem">
                    <div class="control">
                        <button class="btn-main" type="submit">Asignar dieta</button>
                        <a class="button is-light"
                           th:href="@{|/nutriologo/dietas?clienteId=${cliente.id}|}">
                            Cancelar
                        </a>
                    </div>
                </div>
            </form>

            <hr/>

            <p class="muted" style="margin-top:.5rem">
                Tip: puedes crear nuevas dietas desde el panel de <strong>Gestión de dietas</strong> y luego asignarlas aquí.
            </p>
        </div>
    </div>
</section>

</body>
</html>
